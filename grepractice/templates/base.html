<!DOCTYPE HTML>
<html lang="en">
<head>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel='stylesheet' type='text/css' href='/static/bootstrap/css/bootstrap.css'>
  <!-- // <script src="/static/angulartics-google-analytics/dist/angulartics-ga.min.js"></script> -->
  <!-- // <script src="/static/angulartics/dist/angulartics.min.js"></script> -->
	<script src="/static/angular.min.js"></script>
	<script src="/static/angular-resource.min.js"></script>
	<script src="/static/angularui.min.js"></script>
 	<script type="text/javascript" src="/static/jquery-2.1.0.min.js"></script>
	<script src="/static/bootstrap/js/bootstrap.js" type="text/javascript"></script>
  <script src="/static/underscore-min.js" type="text/javascript"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1"> 	
  <style>
    .pose_button {
      margin-right:1%;
      margin-bottom:1%;
      padding: 1.2em;
    }

    .poses-button:hover{
      background-color: #333;
      text-decoration: underline;
      box-shadow: 2.4px 2.4px 1.2px #666;
      color:#fff;
    }

    .title {
      font-family: Arial;
      color: #333;
      letter-spacing: 1.2px;
      padding-right: 4.5%;

    }

    .title:hover {
      color:#666;
    }

    .pose_title {
      font-family:Verdana;
      color: #999;
      font-weight: 400;
      letter-spacing: 1.2px;
    }

    img {
      width: 100%;
      float: left;
      margin: 4%;
    }

    #footer {
      height: 2em;
      position: relative;
      margin-top: -1em;
      clear: both;
    }

    #footer > p {
      padding-top:.2em;
      text-align: center;
      color: #333;
      font-size: 10px;
    }

    @media (max-width: 767px) {
      #footer {
        margin-top: 5em ;
        margin-left: -20px;
        margin-right: -20px;
        padding-left: 20px;
        padding-right: 20px;
      }
    }


  </style>

<script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-84128605-1', 'auto');
    // ga('send', 'pageview');
    var underscore = angular.module('underscore', []);
    underscore.factory('_', function() {
      return window._; // assumes underscore has already been loaded on the page
    });


   var JeffCaStretching = angular.module('JeffCaStretching', ['ngResource', 'underscore']);
   // var JeffCaStretching = angular.module('JeffCaStretching', ['ngResource', 'underscore', 'angulartics-google-analytics']);

    // JeffCaStretching.factory("Comps", function($resource) {
    //     return $resource("/api/comps/:Id", { Id: "@Id"}, {
    //       "update": {method:"PUT"}, 
    //       "query": { method:"GET", isArray: false, transformResponse: function(data) { return angular.fromJson(data).objects; } }
    //     });
    // });

    JeffCaStretching.config(function($routeProvider) {
       $routeProvider
        .when('/', { controller: 'PracticeController', templateUrl: '/static/partials/practice.html' })
        .when('/tests', { controller: 'MyController', templateUrl: '/static/partials/home.html' })
        .when('/flashcards', { controller: 'FlashcardsController', templateUrl: '/static/partials/flashcards.html' })
        .when('/sentences', { controller: 'SentencesController', templateUrl: '/static/partials/sentences.html' })
        .otherwise({ redirectTo: '/'});
    });

    JeffCaStretching.controller('MyController', function($scope, $rootScope, $http, $location,  _) {
        function shuffle(array) {
            for (var i = array.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = array[i];
                array[i] = array[j];
                array[j] = temp;
            }
            return array;
        }
        var req = {
          method: 'GET',
          url: 'https://api.fieldbook.com/v1/57ca5f20e13ef4030064f045/tests/',
          headers: {
           'Authorization': 'Basic ' + btoa('key-1:7pvF0z57nOLkFi7hGiMa')
          },
        };
        $http(req).success(function(data) {
          $scope.tests=data;
          console.log(data);
        });

      $scope.newVocabularyTest=function() {
        var req = {
          method: 'GET',
          url: 'https://api.fieldbook.com/v1/57ca5f20e13ef4030064f045/vocabulary_tests/',
          headers: {
           'Authorization': 'Basic ' + btoa('key-1:7pvF0z57nOLkFi7hGiMa')
          },
        };
        var tests = [1,2,3]
        shuffle(tests);
        $http(req).success(function(data){
          $scope.vocabulary=_.where(data,{"testtype":"sentence"});
          shuffle($scope.vocabulary);
          console.log($scope.vocabulary);
          $scope.currentIndex=0;
          $scope.question=$scope.vocabulary[$scope.currentIndex];
          $scope.array1=["choicea","choiceb","choicec","choiced","correctchoice"];
          shuffle($scope.array1);
          $scope.choicea=$scope.vocabulary[$scope.currentIndex][$scope.array1[0]];
          $scope.choiceb=$scope.vocabulary[$scope.currentIndex][$scope.array1[1]];
          $scope.choicec=$scope.vocabulary[$scope.currentIndex][$scope.array1[2]];
          $scope.choiced=$scope.vocabulary[$scope.currentIndex][$scope.array1[3]];
          $scope.correctchoice=$scope.vocabulary[$scope.currentIndex][$scope.array1[4]];
        });
        $scope.message="";
        $scope.choice={};        
        $scope.results=0;
      }
      $scope.newWordTest=function() {
        var req = {
          method: 'GET',
          url: 'https://api.fieldbook.com/v1/57ca5f20e13ef4030064f045/vocabulary_tests/',
          headers: {
           'Authorization': 'Basic ' + btoa('key-1:7pvF0z57nOLkFi7hGiMa')
          },
        };
        $http(req).success(function(data){
          $scope.vocabulary=_.where(data,{"testtype":"word"});
          shuffle($scope.vocabulary);
          console.log($scope.vocabulary);
          $scope.currentIndex=0;
          $scope.question=$scope.vocabulary[$scope.currentIndex];
          $scope.array1=["choicea","choiceb","choicec","choiced","correctchoice"];
          shuffle($scope.array1);
          $scope.choicea=$scope.vocabulary[$scope.currentIndex][$scope.array1[0]];
          $scope.choiceb=$scope.vocabulary[$scope.currentIndex][$scope.array1[1]];
          $scope.choicec=$scope.vocabulary[$scope.currentIndex][$scope.array1[2]];
          $scope.choiced=$scope.vocabulary[$scope.currentIndex][$scope.array1[3]];
          $scope.correctchoice=$scope.vocabulary[$scope.currentIndex][$scope.array1[4]];
        });
        $scope.choice={};        
        $scope.message="";
        $scope.results=0;
      }
      $scope.newDefinitionTest=function() {
        var req = {
          method: 'GET',
          url: 'https://api.fieldbook.com/v1/57ca5f20e13ef4030064f045/vocabulary_tests/',
          headers: {
           'Authorization': 'Basic ' + btoa('key-1:7pvF0z57nOLkFi7hGiMa')
          },
        };
        $http(req).success(function(data){
          $scope.vocabulary=_.where(data,{"testtype":"definition"});
          shuffle($scope.vocabulary);
          console.log($scope.vocabulary);
          $scope.currentIndex=0;
          $scope.question=$scope.vocabulary[$scope.currentIndex];
          $scope.array1=["choicea","choiceb","choicec","choiced","correctchoice"];
          shuffle($scope.array1);
          $scope.choicea=$scope.vocabulary[$scope.currentIndex][$scope.array1[0]];
          $scope.choiceb=$scope.vocabulary[$scope.currentIndex][$scope.array1[1]];
          $scope.choicec=$scope.vocabulary[$scope.currentIndex][$scope.array1[2]];
          $scope.choiced=$scope.vocabulary[$scope.currentIndex][$scope.array1[3]];
          $scope.correctchoice=$scope.vocabulary[$scope.currentIndex][$scope.array1[4]];
        });
        $scope.choice={};        
        $scope.message="";
        $scope.results=0;
      }      
      $scope.submit=function(){
        console.log($scope.choice.answer);
        console.log($scope.question.correctchoice);    
        if ($scope.choice.answer==$scope.question.correctchoice) {
          $scope.results+=1;
          $scope.message="correct";
          console.log("Correct!");
        } else {
          $scope.message="incorrect";
          console.log("incorrect.")
        }
        $scope.currentIndex+=1;
        if ($scope.currentIndex < 9) {
          $scope.array1=["choicea","choiceb","choicec","choiced","correctchoice"];
          shuffle($scope.array1); 
          $scope.choicea=$scope.vocabulary[$scope.currentIndex][$scope.array1[0]];
          $scope.choiceb=$scope.vocabulary[$scope.currentIndex][$scope.array1[1]];
          $scope.choicec=$scope.vocabulary[$scope.currentIndex][$scope.array1[2]];
          $scope.choiced=$scope.vocabulary[$scope.currentIndex][$scope.array1[3]];
          $scope.correctchoice=$scope.vocabulary[$scope.currentIndex][$scope.array1[4]];          
          $scope.question=$scope.vocabulary[$scope.currentIndex];
        } else {
          console.log("test is over.");
        }     
      }
    });

    JeffCaStretching.controller('PracticeController', function($scope, $rootScope, $http, $location, _) {                          
      var req = {
        "method": "GET",
          url: 'https://api.fieldbook.com/v1/57ca5f20e13ef4030064f045/words/',
          headers: {
           'Authorization': 'Basic ' + btoa('key-1:7pvF0z57nOLkFi7hGiMa')
          },        
      };
      $http(req).success(function(data) {
          $scope.words=data;
          console.log(data);
      });
      $scope.startPack=function(packid){
        $scope.packwords = _.where($scope.words, {"packid":packid});
      };
    });

    JeffCaStretching.controller('FlashcardsController', function($scope, $rootScope, $http, $location, _) {                          
      var req = {
        "method": "GET",
          url: 'https://api.fieldbook.com/v1/57ca5f20e13ef4030064f045/words/',
          headers: {
           'Authorization': 'Basic ' + btoa('key-1:7pvF0z57nOLkFi7hGiMa')
          },        
      };
      $http(req).success(function(data) {
          $scope.words=data;
          console.log(data);
          $scope.word = $scope.words[0];
      });
      $scope.flip=function(wordid){
        $scope.word = null; 
        $scope.w=_.where($scope.words, {"id":wordid})[0];
        console.log($scope.w);
      };
      $scope.next=function(wordid){
        var i=Math.floor(Math.random() * ($scope.words.length - 0) + 0);
        console.log(i);
        $scope.word=$scope.words[i];
        console.log($scope.word);
        $scope.w=null;
        $scope.showSentence=null;
      };      
    });

    JeffCaStretching.controller('SentencesController', function($scope, $rootScope, $http, $location, _) {                          
      var req = {
        "method": "GET",
          url: 'https://api.fieldbook.com/v1/57ca5f20e13ef4030064f045/words/',
          headers: {
           'Authorization': 'Basic ' + btoa('key-1:7pvF0z57nOLkFi7hGiMa')
          },        
      };
      $http(req).success(function(data) {
          $scope.words=data;
          console.log(data);
          $scope.word = $scope.words[0];
      });
    });    
</script>

</head>

<body>
<div class="container" data-role="page" itemscope itemtype="http://schema.org/GovernmentOrganization">

<div ng-app="JeffCaStretching" class="col-md-12">

{% block body %}


{% endblock %}

<div id="footer">
  <p>©2018 JeffCa. All rights reserved. <a href="mailto:jeff12ca@gmail.com" alt="email">Contact Us</a></p>
</div>


</div>
</body>

</html>